<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VS Browser</title>
    <style>
        /* –ë–∞–∑–æ–≤—ã–µ —Å—Ç–∏–ª–∏ */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
            background: #e9eef2; /* –°–≤–µ—Ç–ª–æ-—Å–µ—Ä—ã–π —Ñ–æ–Ω */
            color: #333;
        }
        
        /* –•–µ–¥–µ—Ä –±—Ä–∞—É–∑–µ—Ä–∞ */
        .browser-header {
            background: linear-gradient(90deg, #34495e, #5d7890); /* –ì—Ä–∞–¥–∏–µ–Ω—Ç */
            color: white;
            padding: 8px 15px;
            display: flex;
            align-items: center;
            gap: 10px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        
        /* –ê–¥—Ä–µ—Å–Ω–∞—è —Å—Ç—Ä–æ–∫–∞ */
        .address-bar {
            flex: 1;
            padding: 8px 15px;
            border: none;
            border-radius: 20px;
            font-size: 14px;
            background: rgba(255, 255, 255, 0.9);
            color: #333;
            box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.1);
            transition: box-shadow 0.2s;
        }
        .address-bar:focus {
            outline: none;
            box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.2), 0 0 0 2px rgba(93, 120, 144, 0.5);
        }
        
        /* –ö–Ω–æ–ø–∫–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ */
        .nav-buttons button,
        .go-button {
            background: none;
            border: none;
            color: white;
            padding: 6px 12px;
            cursor: pointer;
            font-size: 16px;
            border-radius: 4px;
            transition: background 0.2s, transform 0.1s;
        }
        
        .nav-buttons button:hover {
            background: rgba(255, 255, 255, 0.1);
        }
        .nav-buttons button:active {
            transform: scale(0.95);
        }
        
        .go-button {
            background: #2ecc71; /* –ó–µ–ª–µ–Ω–∞—è –∫–Ω–æ–ø–∫–∞ "–ü–µ—Ä–µ–π—Ç–∏" */
            border-radius: 20px;
            font-weight: bold;
            font-size: 14px;
            padding: 8px 15px;
        }
        .go-button:hover {
            background: #27ae60;
        }
        
        /* –§—Ä–µ–π–º –¥–ª—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞ */
        .browser-frame {
            width: 100%;
            height: calc(100vh - 46px); /* –£–º–µ–Ω—å—à–∏–ª –≤—ã—Å–æ—Ç—É, —á—Ç–æ–±—ã –∫–æ–º–ø–µ–Ω—Å–∏—Ä–æ–≤–∞—Ç—å padding —Ö–µ–¥–µ—Ä–∞ */
            border: none;
            background: white;
        }
        
        /* –°–æ—Å—Ç–æ—è–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏ */
        .loading {
            padding: 40px;
            text-align: center;
            color: #666;
            font-size: 18px;
        }
    </style>
</head>
<body>
    <div class="browser-header">
        <div class="nav-buttons">
            <button onclick="goBack()" title="–ù–∞–∑–∞–¥">‚¨ÖÔ∏è</button>
            <button onclick="goForward()" title="–í–ø–µ—Ä–µ–¥">‚û°Ô∏è</button>
            <button onclick="refresh()" title="–û–±–Ω–æ–≤–∏—Ç—å">üîÑ</button>
        </div>
        
        <input type="text" class="address-bar" id="addressBar" 
               placeholder="–í–≤–µ–¥–∏—Ç–µ –∞–¥—Ä–µ—Å (–Ω–∞–ø—Ä–∏–º–µ—Ä: mail.vs)" 
               onkeypress="handleAddressEnter(event)">
        
        <button class="go-button" onclick="goToAddress()">–ü–µ—Ä–µ–π—Ç–∏</button>
    </div>
    
    <iframe class="browser-frame" id="browserFrame" 
            sandbox="allow-scripts allow-forms allow-same-origin"></iframe>

    <script src="api.js"></script>
    <script>
        // ... (–í–µ—Å—å JavaScript –∫–æ–¥ –æ—Å—Ç–∞–µ—Ç—Å—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π)
        let history = [];
        let currentHistoryIndex = -1;
        
        function handleAddressEnter(event) {
            if (event.key === 'Enter') {
                goToAddress();
            }
        }
        
        function goToAddress() {
            const address = document.getElementById('addressBar').value.trim();
            if (address) {
                navigateTo(address);
            }
        }
        
        async function navigateTo(url) {
            const frame = document.getElementById('browserFrame');
            const loadingHtml = '<div class="loading">–ó–∞–≥—Ä—É–∑–∫–∞...</div>';
            frame.srcdoc = loadingHtml;
            
            try {
                const content = await loadWebsite(url);
                history = history.slice(0, currentHistoryIndex + 1);
                history.push(url);
                currentHistoryIndex = history.length - 1;
                
                document.getElementById('addressBar').value = url;
                frame.srcdoc = content;
            } catch (error) {
                frame.srcdoc = `
                    <div style="padding: 20px; text-align: center; color: #e74c3c;">
                        <h2>‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏</h2>
                        <p>${error.message}</p>
                        <p>–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –¥—Ä—É–≥–æ–π –∞–¥—Ä–µ—Å</p>
                    </div>
                `;
            }
        }
        
        function goBack() {
            if (currentHistoryIndex > 0) {
                currentHistoryIndex--;
                const url = history[currentHistoryIndex];
                document.getElementById('addressBar').value = url;
                // –í–º–µ—Å—Ç–æ navigateTo, –∏—Å–ø–æ–ª—å–∑—É–µ–º –ø—Ä—è–º—É—é –∑–∞–≥—Ä—É–∑–∫—É –∏–∑ –∏—Å—Ç–æ—Ä–∏–∏ –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏–Ω–¥–µ–∫—Å–∞
                loadFromHistory(url);
            }
        }
        
        function goForward() {
            if (currentHistoryIndex < history.length - 1) {
                currentHistoryIndex++;
                const url = history[currentHistoryIndex];
                document.getElementById('addressBar').value = url;
                // –í–º–µ—Å—Ç–æ navigateTo, –∏—Å–ø–æ–ª—å–∑—É–µ–º –ø—Ä—è–º—É—é –∑–∞–≥—Ä—É–∑–∫—É –∏–∑ –∏—Å—Ç–æ—Ä–∏–∏ –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏–Ω–¥–µ–∫—Å–∞
                loadFromHistory(url);
            }
        }

        async function loadFromHistory(url) {
            const frame = document.getElementById('browserFrame');
            const loadingHtml = '<div class="loading">–ó–∞–≥—Ä—É–∑–∫–∞...</div>';
            frame.srcdoc = loadingHtml;

            try {
                const content = await loadWebsite(url);
                frame.srcdoc = content;
            } catch (error) {
                frame.srcdoc = `
                    <div style="padding: 20px; text-align: center; color: #e74c3c;">
                        <h2>‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏</h2>
                        <p>${error.message}</p>
                        <p>–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –¥—Ä—É–≥–æ–π –∞–¥—Ä–µ—Å</p>
                    </div>
                `;
            }
        }

        
        function refresh() {
            if (history[currentHistoryIndex]) {
                navigateTo(history[currentHistoryIndex]);
            }
        }
        
        // –ó–∞–≥—Ä—É–∂–∞–µ–º —Å—Ç–∞—Ä—Ç–æ–≤—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É
        window.onload = function() {
            navigateTo('welcome.vs');
        };
    </script>
</body>
</html>
