<!DOCTYPE html>
<html>
<head>
    <title>–†–µ–∑—É–ª—å—Ç–∞—Ç—ã - SearchIt.vs</title>
    <style>
        body {
            margin: 20px;
            font-family: Arial;
        }
        .header {
            margin-bottom: 20px;
        }
        input {
            width: 500px;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        button {
            padding: 8px 16px;
            border: 1px solid #f8f9fa;
            background: #f8f9fa;
            cursor: pointer;
        }
        .result {
            margin: 15px 0;
        }
        .result a {
            color: #1a0dab;
            text-decoration: none;
            font-size: 18px;
        }
        .result a:hover {
            text-decoration: underline;
        }
        .url {
            color: #006621;
            font-size: 14px;
        }
    </style>
</head>
<body>
    <div class="header">
        <a href="../start.html" style="color: #1a0dab; text-decoration: none;">üîç SearchIt.vs</a>
        <form onsubmit="handleSearch(event)" style="margin-top: 10px;">
            <input type="text" id="search" placeholder="–í–≤–µ–¥–∏—Ç–µ –∑–∞–ø—Ä–æ—Å">
            <button type="submit">–ü–æ–∏—Å–∫</button>
        </form>
    </div>

    <div id="results"></div>

    <script>
        function handleSearch(event) {
            event.preventDefault();
            const query = document.getElementById('search').value.trim();
            if (query && window.parent && window.parent.navigateTo) {
                window.parent.navigateTo(`searchit.vs/search/${encodeURIComponent(query)}`);
            }
        }

        // –ü–æ–ª—É—á–∞–µ–º —Å–∞–π—Ç—ã –∏–∑ API
        async function loadResults() {
            const path = window.location.href.split('/search/')[1];
            const query = decodeURIComponent(path || '');
            
            if (query) {
                document.getElementById('search').value = query;
                
                // –ü–æ–ª—É—á–∞–µ–º –≤—Å–µ —Å–∞–π—Ç—ã —á–µ—Ä–µ–∑ API
                const allSites = await getAllSites();
                
                // –ò—â–µ–º —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è
                const results = allSites.filter(site => 
                    site.name.toLowerCase().includes(query.toLowerCase())
                );
                
                displayResults(results, query);
            }
        }

        async function getAllSites() {
            // –ó–¥–µ—Å—å –±—É–¥–µ—Ç –∑–∞–ø—Ä–æ—Å –∫ API –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ —Å–∞–π—Ç–æ–≤
            // –ü–æ–∫–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–ø–∏—Å–æ–∫
            return [
                { name: 'mail.vs' },
                { name: 'goverment.vs' },
                { name: 'welcome.vs' },
                { name: 'searchit.vs' },
                { name: 'admin.goverment.vs' }
            ];
        }

        function displayResults(results, query) {
            const container = document.getElementById('results');
            
            if (results.length === 0) {
                container.innerHTML = `<p>–ü–æ –∑–∞–ø—Ä–æ—Å—É "${query}" –Ω–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ</p>`;
            } else {
                container.innerHTML = results.map(site => `
                    <div class="result">
                        <a href="javascript:void(0)" onclick="goTo('${site.name}')">${site.name}</a>
                        <div class="url">${site.name}</div>
                    </div>
                `).join('');
            }
        }

        function goTo(site) {
            if (window.parent && window.parent.navigateTo) {
                window.parent.navigateTo(site);
            }
        }

        // –ó–∞–≥—Ä—É–∂–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        loadResults();
    </script>
</body>
</html>
